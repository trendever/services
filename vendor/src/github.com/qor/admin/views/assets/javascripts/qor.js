$.fn.qorSliderAfterShow={},window.Mustache.tags=["[[","]]"],$(document).ajaxComplete(function(t,e,i){"POST"!=i.type&&"PUT"!=i.type||($.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)}),function(t){"function"==typeof define&&define.amd?define("datepicker",["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(t){return M.call(t).slice(8,-1).toLowerCase()}function i(t){return"string"==typeof t}function n(t){return"number"==typeof t&&!isNaN(t)}function s(t){return"undefined"==typeof t}function o(t){return"date"===e(t)}function a(t,e){var i=[];return Array.from?Array.from(t).slice(e||0):(n(e)&&i.push(e),i.slice.apply(t,i))}function r(t,e){var i=a(arguments,2);return function(){return t.apply(e,i.concat(a(arguments)))}}function l(t){return t%4===0&&t%100!==0||t%400===0}function d(t,e){return[31,l(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function h(t){var e,i,n=String(t).toLowerCase(),s=n.match(k);if(!s||0===s.length)throw new Error("Invalid date format.");for(t={source:n,parts:s},e=s.length,i=0;e>i;i++)switch(s[i]){case"dd":case"d":t.hasDay=!0;break;case"mm":case"m":t.hasMonth=!0;break;case"yyyy":case"yy":t.hasYear=!0}return t}function c(e,i){i=t.isPlainObject(i)?i:{},i.language&&(i=t.extend({},c.LANGUAGES[i.language],i)),this.$element=t(e),this.options=t.extend({},c.DEFAULTS,i),this.isBuilt=!1,this.isShown=!1,this.isInput=!1,this.isInline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}var u=t(window),f=window.document,p=t(f),m=window.Number,g="datepicker",b="click."+g,y="keyup."+g,v="focus."+g,w="resize."+g,q="show."+g,_="hide."+g,$="pick."+g,k=/(y|m|d)+/g,C=/\d+/g,D=/^\d{2,4}$/,x=g+"-inline",S=g+"-dropdown",T=g+"-top-left",j=g+"-top-right",E=g+"-bottom-left",A=g+"-bottom-right",L=[T,j,E,A].join(" "),F=g+"-hide",I=Math.min,M=Object.prototype.toString;c.prototype={constructor:c,init:function(){var e=this.options,i=this.$element,n=e.startDate,s=e.endDate,o=e.date;this.$trigger=t(e.trigger||i),this.isInput=i.is("input")||i.is("textarea"),this.isInline=e.inline&&(e.container||!this.isInput),this.format=h(e.format),this.initialValue=this.getValue(),o=this.parseDate(o||this.initialValue),n&&(n=this.parseDate(n),o.getTime()<n.getTime()&&(o=new Date(n)),this.startDate=n),s&&(s=this.parseDate(s),n&&s.getTime()<n.getTime()&&(s=new Date(n)),o.getTime()>s.getTime()&&(o=new Date(s)),this.endDate=s),this.date=o,this.viewDate=new Date(o),this.initialDate=new Date(this.date),this.bind(),(e.autoshow||this.isInline)&&this.show(),e.autopick&&this.pick()},build:function(){var e,i=this.options,n=this.$element;this.isBuilt||(this.isBuilt=!0,this.$picker=e=t(i.template),this.$week=e.find('[data-view="week"]'),this.$yearsPicker=e.find('[data-view="years picker"]'),this.$yearsPrev=e.find('[data-view="years prev"]'),this.$yearsNext=e.find('[data-view="years next"]'),this.$yearsCurrent=e.find('[data-view="years current"]'),this.$years=e.find('[data-view="years"]'),this.$monthsPicker=e.find('[data-view="months picker"]'),this.$yearPrev=e.find('[data-view="year prev"]'),this.$yearNext=e.find('[data-view="year next"]'),this.$yearCurrent=e.find('[data-view="year current"]'),this.$months=e.find('[data-view="months"]'),this.$daysPicker=e.find('[data-view="days picker"]'),this.$monthPrev=e.find('[data-view="month prev"]'),this.$monthNext=e.find('[data-view="month next"]'),this.$monthCurrent=e.find('[data-view="month current"]'),this.$days=e.find('[data-view="days"]'),this.isInline?t(i.container||n).append(e.addClass(x)):(t(f.body).append(e.addClass(S)),e.addClass(F)),this.fillWeek())},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$picker.remove())},bind:function(){var e=this.options,i=this.$element;t.isFunction(e.show)&&i.on(q,e.show),t.isFunction(e.hide)&&i.on(_,e.hide),t.isFunction(e.pick)&&i.on($,e.pick),this.isInput&&(i.on(y,t.proxy(this.keyup,this)),e.trigger||i.on(v,t.proxy(this.show,this))),this.$trigger.on(b,t.proxy(this.show,this))},unbind:function(){var e=this.options,i=this.$element;t.isFunction(e.show)&&i.off(q,e.show),t.isFunction(e.hide)&&i.off(_,e.hide),t.isFunction(e.pick)&&i.off($,e.pick),this.isInput&&(i.off(y,this.keyup),e.trigger||i.off(v,this.show)),this.$trigger.off(b,this.show)},showView:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,n=this.$daysPicker,s=this.format;if(s.hasYear||s.hasMonth||s.hasDay)switch(m(t)){case 2:case"years":i.addClass(F),n.addClass(F),s.hasYear?(this.fillYears(),e.removeClass(F)):this.showView(0);break;case 1:case"months":e.addClass(F),n.addClass(F),s.hasMonth?(this.fillMonths(),i.removeClass(F)):this.showView(2);break;default:e.addClass(F),i.addClass(F),s.hasDay?(this.fillDays(),n.removeClass(F)):this.showView(1)}},hideView:function(){this.options.autohide&&this.hide()},place:function(){var t=this.options,e=this.$element,i=this.$picker,n=p.outerWidth(),s=p.outerHeight(),o=e.outerWidth(),a=e.outerHeight(),r=i.width(),l=i.height(),d=e.offset(),h=d.left,c=d.top,u=parseFloat(t.offset)||10,f=T;c>l&&c+a+l>s?(c-=l+u,f=E):c+=a+u,h+r>n&&(h=h+o-r,f=f.replace("left","right")),i.removeClass(L).addClass(f).css({top:c,left:h,zIndex:parseInt(t.zIndex,10)})},trigger:function(e,i){var n=t.Event(e,i);return this.$element.trigger(n),n},createItem:function(e){var i=this.options,n=i.itemTag,s={text:"",view:"",muted:!1,picked:!1,disabled:!1};return t.extend(s,e),"<"+n+" "+(s.disabled?'class="'+i.disabledClass+'"':s.picked?'class="'+i.pickedClass+'"':s.muted?'class="'+i.mutedClass+'"':"")+(s.view?' data-view="'+s.view+'"':"")+">"+s.text+"</"+n+">"},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillWeek:function(){var e,i=this.options,n=parseInt(i.weekStart,10)%7,s=i.daysMin,o="";for(s=t.merge(s.slice(n),s.slice(0,n)),e=0;6>=e;e++)o+=this.createItem({text:s[e]});this.$week.html(o)},fillYears:function(){var e,i=this.options,n=i.disabledClass||"",s=i.yearSuffix||"",o=t.isFunction(i.filter)&&i.filter,a=this.startDate,r=this.endDate,l=this.viewDate,d=l.getFullYear(),h=l.getMonth(),c=l.getDate(),u=this.date,f=u.getFullYear(),p=!1,m=!1,g=!1,b=!1,y=!1,v="",w=-5,q=6;for(e=w;q>=e;e++)u=new Date(d+e,h,c),y=e===w||e===q,b=d+e===f,g=!1,a&&(g=u.getFullYear()<a.getFullYear(),e===w&&(p=g)),!g&&r&&(g=u.getFullYear()>r.getFullYear(),e===q&&(m=g)),!g&&o&&(g=o.call(this.$element,u)===!1),v+=this.createItem({text:d+e,view:g?"year disabled":b?"year picked":"year",muted:y,picked:b,disabled:g});this.$yearsPrev.toggleClass(n,p),this.$yearsNext.toggleClass(n,m),this.$yearsCurrent.toggleClass(n,!0).html(d+w+s+" - "+(d+q)+s),this.$years.html(v)},fillMonths:function(){var e,i=this.options,n=i.disabledClass||"",s=i.monthsShort,o=t.isFunction(i.filter)&&i.filter,a=this.startDate,r=this.endDate,l=this.viewDate,d=l.getFullYear(),h=l.getDate(),c=this.date,u=c.getFullYear(),f=c.getMonth(),p=!1,m=!1,g=!1,b=!1,y="";for(e=0;11>=e;e++)c=new Date(d,e,h),b=d===u&&e===f,g=!1,a&&(p=c.getFullYear()===a.getFullYear(),g=p&&c.getMonth()<a.getMonth()),!g&&r&&(m=c.getFullYear()===r.getFullYear(),g=m&&c.getMonth()>r.getMonth()),!g&&o&&(g=o.call(this.$element,c)===!1),y+=this.createItem({index:e,text:s[e],view:g?"month disabled":b?"month picked":"month",picked:b,disabled:g});this.$yearPrev.toggleClass(n,p),this.$yearNext.toggleClass(n,m),this.$yearCurrent.toggleClass(n,p&&m).html(d+i.yearSuffix||""),this.$months.html(y)},fillDays:function(){var e,i,n,s=this.options,o=s.disabledClass||"",a=s.yearSuffix||"",r=s.monthsShort,l=parseInt(s.weekStart,10)%7,h=t.isFunction(s.filter)&&s.filter,c=this.startDate,u=this.endDate,f=this.viewDate,p=f.getFullYear(),m=f.getMonth(),g=p,b=m,y=p,v=m,w=this.date,q=w.getFullYear(),_=w.getMonth(),$=w.getDate(),k=!1,C=!1,D=!1,x=!1,S=[],T=[],j=[],E=42;for(0===m?(g-=1,b=11):b-=1,e=d(g,b),w=new Date(p,m,1),n=w.getDay()-l,0>=n&&(n+=7),c&&(k=w.getTime()<=c.getTime()),i=e-(n-1);e>=i;i++)w=new Date(g,b,i),D=!1,c&&(D=w.getTime()<c.getTime()),!D&&h&&(D=h.call(this.$element,w)===!1),S.push(this.createItem({text:i,view:"day prev",muted:!0,disabled:D}));for(11===m?(y+=1,v=0):v+=1,e=d(p,m),n=E-(S.length+e),w=new Date(p,m,e),u&&(C=w.getTime()>=u.getTime()),i=1;n>=i;i++)w=new Date(y,v,i),D=!1,u&&(D=w.getTime()>u.getTime()),!D&&h&&(D=h.call(this.$element,w)===!1),T.push(this.createItem({text:i,view:"day next",muted:!0,disabled:D}));for(i=1;e>=i;i++)w=new Date(p,m,i),x=p===q&&m===_&&i===$,D=!1,c&&(D=w.getTime()<c.getTime()),!D&&u&&(D=w.getTime()>u.getTime()),!D&&h&&(D=h.call(this.$element,w)===!1),j.push(this.createItem({text:i,view:D?"day disabled":x?"day picked":"day",picked:x,disabled:D}));this.$monthPrev.toggleClass(o,k),this.$monthNext.toggleClass(o,C),this.$monthCurrent.toggleClass(o,k&&C).html(s.yearFirst?p+a+" "+r[m]:r[m]+" "+p+a),this.$days.html(S.join("")+j.join(" ")+T.join(""))},click:function(e){var i,n,s,o,a,r,l=t(e.target),d=this.viewDate;if(e.stopPropagation(),e.preventDefault(),!l.hasClass("disabled"))switch(i=d.getFullYear(),n=d.getMonth(),s=d.getDate(),r=l.data("view")){case"years prev":case"years next":i="years prev"===r?i-10:i+10,a=l.text(),o=D.test(a),o&&(i=parseInt(a,10),this.date=new Date(i,n,I(s,28))),this.viewDate=new Date(i,n,I(s,28)),this.fillYears(),o&&(this.showView(1),this.pick("year"));break;case"year prev":case"year next":i="year prev"===r?i-1:i+1,this.viewDate=new Date(i,n,I(s,28)),this.fillMonths();break;case"year current":this.format.hasYear&&this.showView(2);break;case"year picked":this.format.hasMonth?this.showView(1):this.hideView();break;case"year":i=parseInt(l.text(),10),this.date=new Date(i,n,I(s,28)),this.viewDate=new Date(i,n,I(s,28)),this.format.hasMonth?this.showView(1):this.hideView(),this.pick("year");break;case"month prev":case"month next":n="month prev"===r?n-1:"month next"===r?n+1:n,this.viewDate=new Date(i,n,I(s,28)),this.fillDays();break;case"month current":this.format.hasMonth&&this.showView(1);break;case"month picked":this.format.hasDay?this.showView(0):this.hideView();break;case"month":n=t.inArray(l.text(),this.options.monthsShort),this.date=new Date(i,n,I(s,28)),this.viewDate=new Date(i,n,I(s,28)),this.format.hasDay?this.showView(0):this.hideView(),this.pick("month");break;case"day prev":case"day next":case"day":n="day prev"===r?n-1:"day next"===r?n+1:n,s=parseInt(l.text(),10),this.date=new Date(i,n,s),this.viewDate=new Date(i,n,s),this.fillDays(),"day"===r&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}},clickDoc:function(t){for(var e,i=t.target,n=this.$trigger[0];i!==f;){if(i===n){e=!0;break}i=i.parentNode}e||this.hide()},keyup:function(){this.update()},getValue:function(){var t=this.$element,e="";return this.isInput?e=t.val():this.isInline?this.options.container&&(e=t.text()):e=t.text(),e},setValue:function(t){var e=this.$element;t=i(t)?t:"",this.isInput?e.val(t):this.isInline?this.options.container&&e.text(t):e.text(t)},show:function(){this.isBuilt||this.build(),this.isShown||this.trigger(q).isDefaultPrevented()||(this.isShown=!0,this.$picker.removeClass(F).on(b,t.proxy(this.click,this)),this.showView(this.options.startView),this.isInline||(u.on(w,this._place=r(this.place,this)),p.on(b,this._clickDoc=r(this.clickDoc,this)),this.place()))},hide:function(){this.isShown&&(this.trigger(_).isDefaultPrevented()||(this.isShown=!1,this.$picker.addClass(F).off(b,this.click),this.isInline||(u.off(w,this._place),p.off(b,this._clickDoc))))},update:function(){this.setDate(this.getValue(),!0)},pick:function(t){var e=this.$element,i=this.date;this.trigger($,{view:t||"",date:i}).isDefaultPrevented()||(this.setValue(i=this.formatDate(this.date)),this.isInput&&e.trigger("change"))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.isShown&&this.showView(this.options.startView)},getMonthName:function(e,i){var o=this.options,a=o.months;return t.isNumeric(e)?e=m(e):s(i)&&(i=e),i===!0&&(a=o.monthsShort),a[n(e)?e:this.date.getMonth()]},getDayName:function(e,i,o){var a=this.options,r=a.days;return t.isNumeric(e)?e=m(e):(s(o)&&(o=i),s(i)&&(i=e)),r=o===!0?a.daysMin:i===!0?a.daysShort:r,r[n(e)?e:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},setDate:function(e,n){var s=this.options.filter;if(o(e)||i(e)){if(e=this.parseDate(e),t.isFunction(s)&&s.call(this.$element,e)===!1)return;this.date=e,this.viewDate=new Date(e),n||this.pick(),this.isBuilt&&this.fillAll()}},setStartDate:function(t){(o(t)||i(t))&&(this.startDate=this.parseDate(t),this.isBuilt&&this.fillAll())},setEndDate:function(t){(o(t)||i(t))&&(this.endDate=this.parseDate(t),this.isBuilt&&this.fillAll())},parseDate:function(t){var e,n,s,a,r,l,d=this.format,h=[];if(o(t))return new Date(t.getFullYear(),t.getMonth(),t.getDate());if(i(t)&&(h=t.match(C)||[]),t=new Date,n=t.getFullYear(),s=t.getDate(),a=t.getMonth(),e=d.parts.length,h.length===e)for(l=0;e>l;l++)switch(r=parseInt(h[l],10)||1,d.parts[l]){case"dd":case"d":s=r;break;case"mm":case"m":a=r-1;break;case"yy":n=2e3+r;break;case"yyyy":n=r}return new Date(n,a,s)},formatDate:function(t){var e,i,n,s,a,r=this.format,l="";if(o(t))for(l=r.source,i=t.getFullYear(),s={d:t.getDate(),m:t.getMonth()+1,yy:i.toString().substring(2),yyyy:i},s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m,e=r.parts.length,a=0;e>a;a++)n=r.parts[a],l=l.replace(n,s[n]);return l},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(g)}},c.LANGUAGES={},c.DEFAULTS={autoshow:!1,autohide:!1,autopick:!1,inline:!1,container:null,trigger:null,language:"",format:"yyyy-mm-dd",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},c.setDefaults=function(e){t.extend(c.DEFAULTS,t.isPlainObject(e)&&e)},c.other=t.fn.datepicker,t.fn.datepicker=function(e){var n,o=a(arguments,1);return this.each(function(){var s,a,r=t(this),l=r.data(g);if(!l){if(/destroy/.test(e))return;s=t.extend({},r.data(),t.isPlainObject(e)&&e),r.data(g,l=new c(this,s))}i(e)&&t.isFunction(a=l[e])&&(n=a.apply(l,o))}),s(n)?this:n},t.fn.datepicker.Constructor=c,t.fn.datepicker.languages=c.LANGUAGES,t.fn.datepicker.setDefaults=c.setDefaults,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=c.other,this}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.$wrap=t(r),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.ajaxForm={},this.init()}var i=window.Mustache,n="qor.action",s="enable."+n,o="disable."+n,a="click."+n,r=".qor-action-forms",l=".qor-page__header",d=".qor-page__body",h=".qor-action-button",c=".mdl-layout__content",u=".qor-actions",f="a.qor-action--button",p=".qor-table__actions a[data-url]",m='[data-toggle="qor.action.bulk"]',g=".qor-action-bulk-buttons",b=".qor-table-container",y=".qor-table--bulking",v=".qor-search-container",w=".qor-slideout",q="primary_values[]";return e.prototype={constructor:e,init:function(){this.bind(),this.initActions()},bind:function(){this.$element.on(a,t.proxy(this.click,this)),t(document).on(a,".qor-table--bulking tr",this.click).on(a,f,this.actionLink)},unbind:function(){this.$element.off(a,this.check)},initActions:function(){this.tables=t(b).find("table").size(),this.tables||(t(g).find("button").attr("disabled",!0),t(f).attr("disabled",!0))},collectFormData:function(){var e=t(y).find(".mdl-checkbox__input:checked"),i=[];return e.size()&&e.each(function(){var e=t(this).closest("tr").data("primary-key");e&&i.push({name:q,value:e.toString()})}),this.ajaxForm.formData=i,this.ajaxForm},actionLink:function(){return t(b).find("table").size()?void 0:!1},actionSubmit:function(t){return this.submit(t),!1},click:function(e){var i=t(e.target);if(i.data().ajaxForm)return this.collectFormData(),this.ajaxForm.properties=i.data(),this.submit(),!1;if(i.is(".qor-action--bulk")&&(this.$wrap.removeClass("hidden"),t(g).find("button").toggleClass("hidden"),this.appendTableCheckbox(),t(b).addClass("qor-table--bulking"),t(l).find(u).addClass("hidden"),t(l).find(v).addClass("hidden")),i.is(".qor-action--exit-bulk")&&(this.$wrap.addClass("hidden"),t(g).find("button").toggleClass("hidden"),this.removeTableCheckbox(),t(b).removeClass("qor-table--bulking"),t(l).find(u).removeClass("hidden"),t(l).find(v).removeClass("hidden")),t(this).is("tr")&&!i.is("a")){var n=t(this).find("td").first();if(n.find(".mdl-checkbox__input").get(0)){var s=t("body").hasClass("qor-bottomsheets-open")||t("body").hasClass("qor-slideout-open"),o=n.find(".mdl-js-checkbox"),a=t('[data-toggle="qor-action-slideout"]').find("form"),r=a.find(".js-primary-value"),d=t(this).data("primary-key"),h=r.filter('[value="'+d+'"]');o.toggleClass("is-checked"),n.parents("tr").toggleClass("is-selected");var c=o.hasClass("is-checked");return n.find("input").prop("checked",c),a.size()&&s&&(c&&!h.size()&&a.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+d+'" />'),!c&&h.size()&&h.remove()),!1}}},renderFlashMessage:function(t){var n=e.FLASHMESSAGETMPL;return i.parse(n),i.render(n,t)},submit:function(e){var i,n=this,s=this.$element,o=this.ajaxForm||{},a=o.properties||t(e.target).data();return!a.fromIndex||o.formData&&o.formData.length?a.confirm&&a.ajaxForm&&!a.fromIndex?window.confirm(a.confirm)?(a=t.extend({},a,{_method:a.method}),void t.post(a.url,a,function(){window.location.reload()})):void 0:void(a.confirm&&!window.confirm(a.confirm)||t.ajax(a.url,{method:a.method,data:o.formData,dataType:a.datatype,beforeSend:function(){s&&s.find(h).attr("disabled",!0)},success:function(e){return a.fromIndex||a.fromMenu?void window.location.reload():(s&&s.find(h).attr("disabled",!1),i=t(t(w).is(":visible")?w:c),t(".qor-alert").remove(),i.find(d).prepend(n.renderFlashMessage(e)),void 0)},error:function(t,e,i){s&&s.find(h).attr("disabled",!1),window.alert([e,i].join(": "))}})):void window.alert(o.properties.errorNoItem)},destroy:function(){this.unbind(),this.$element.removeData(n)},removeTableCheckbox:function(){t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("td").remove()}),t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("th").remove()}),t(".qor-table-container tr.is-selected").removeClass("is-selected"),t(".qor-page__body table.mdl-data-table--selectable").removeClass("mdl-data-table--selectable"),t(".qor-page__body tr.is-selected").removeClass("is-selected")},appendTableCheckbox:function(){t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("td").remove()}),t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("th").remove()}),t(".qor-table-container tr.is-selected").removeClass("is-selected"),t(".qor-page__body table").addClass("mdl-data-table--selectable"),new window.MaterialDataTable(t(".qor-page__body table").get(0)),t('thead.is-hidden tr th:not(".mdl-data-table__cell--non-numeric")').clone().prependTo(t('thead:not(".is-hidden") tr'));var e=t('thead:not(".is-fixed") .mdl-checkbox__input'),i=t(".qor-table--medialibrary").size(),n=t("body").hasClass("qor-bottomsheets-open")||t("body").hasClass("qor-slideout-open");i&&(e=t("thead .mdl-checkbox__input")),e.on("click",function(){i||(t("thead.is-fixed tr th").eq(0).find("label").click(),t(this).closest("label").toggleClass("is-checked"));var e=t('[data-toggle="qor-action-slideout"]').find("form"),s=e.find(".js-primary-value");if(e.size()&&n)if(t(this).is(":checked")){var o=t(".qor-table--bulking tbody tr");o.each(function(){var i=t(this).data("primary-key");i&&e.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+i+'" />')})}else s.remove()})}},e.FLASHMESSAGETMPL='<div class="qor-alert qor-action-alert qor-alert--success [[#error]]qor-alert--error[[/error]]" [[#message]]data-dismissible="true"[[/message]] role="alert"><button type="button" class="mdl-button mdl-button--icon" data-dismiss="alert"><i class="material-icons">close</i></button><span class="qor-alert-message">[[#message]][[message]][[/message]][[#error]][[error]][[/error]]</span></div>',e.DEFAULTS={},t.fn.qorSliderAfterShow.qorActionInit=function(e,i){var n=t(i).find('[data-toggle="qor-action-slideout"]').size(),s=t('[data-toggle="qor-action-slideout"]').find("form"),o=t(".qor-page__body .mdl-checkbox__input:checked");n&&o.size()&&o.each(function(e,i){var n=t(i).parents("tbody tr").data("primary-key");n&&s.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+n+'" />')})},e.plugin=function(i){return this.each(function(){var s,o=t(this),a=o.data(n);a||o.data(n,a=new e(this,i)),"string"==typeof i&&t.isFunction(s=a[i])&&s.call(a)})},t(function(){var i={};t(document).on(o,function(i){e.plugin.call(t(m,i.target),"destroy")}).on(s,function(n){e.plugin.call(t(m,n.target),i)}).on(a,p,function(t){return(new e).actionSubmit(t),!1}).triggerHandler(s)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i="qor.autoheight",n="enable."+i,s="disable."+i,o="input";return e.prototype={constructor:e,init:function(){var t=this.$element;this.overflow=t.css("overflow"),this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),t.css("overflow","hidden"),this.resize(),this.bind()},bind:function(){this.$element.on(o,t.proxy(this.resize,this))},unbind:function(){this.$element.off(o,this.resize)},resize:function(){var t=this.$element;t.is(":hidden")||t.height("auto").height(t.prop("scrollHeight")-this.paddingTop-this.paddingBottom)},destroy:function(){this.unbind(),this.$element.css("overflow",this.overflow).removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var s,o=t(this),a=o.data(i);if(!a){if(/destroy/.test(n))return;o.data(i,a=new e(this,n))}"string"==typeof n&&t.isFunction(s=a[n])&&s.apply(a)})},t(function(){var i="textarea.qor-js-autoheight";t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.disabled=!1,this.resourseData={},this.init()}function i(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=i.exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function n(t,e,i){var n=String(e).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp("([?&])"+n+"=.*?(&|$)","i"),o=-1!==t.indexOf("?")?"&":"?";return t.match(s)?t.replace(s,"$1"+e+"="+i+"$2"):t+o+e+"="+i}var s=window.FormData,o="qor.bottomsheets",a="click."+o,r="submit."+o,l="reload."+o,d="show."+o,h="shown."+o,c="hide."+o,u="hidden."+o,f="keyup."+o,p="qor-bottomsheets-open",m="is-shown",g="is-slided",b=".mdl-layout__content.qor-page",y=".qor-page__body",v=".qor-page__header",w=".qor-bottomsheets",q=".qor-bottomsheet__filter",_=".qor-bottomsheets__search-button",$=".qor-bottomsheets__search-input",k="http://www.getqor.com/";return e.prototype={constructor:e,init:function(){this.build(),this.bind()},build:function(){var i=t(w);i.size()&&i.remove(),this.$bottomsheets=i=t(e.TEMPLATE).appendTo("body"),this.$body=i.find(".qor-bottomsheets__body"),this.$title=i.find(".qor-bottomsheets__title"),this.$header=i.find(".qor-bottomsheets__header"),this.$bodyClass=t("body").prop("class"),this.filterURL="",this.searchParams=""},unbuild:function(){this.$body=null,this.bottomsheets.remove()},bind:function(){this.$bottomsheets.on(r,"form",this.submit.bind(this)).on(a,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).on(a,".qor-pagination a",this.pagination.bind(this)).on(a,_,this.search.bind(this)).on(f,this.keyup.bind(this)).on("selectorChanged.qor.selector",this.selectorChanged.bind(this)).on("filterChanged.qor.filter",this.filterChanged.bind(this))},unbind:function(){this.$bottomsheets.off(r,"form",this.submit.bind(this)).off(a,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).off(a,".qor-pagination a",this.pagination.bind(this)).off(a,_,this.search.bind(this)).off("selectorChanged.qor.selector",this.selectorChanged.bind(this)).off("filterChanged.qor.filter",this.filterChanged.bind(this))},bindActionData:function(t){for(var e=this.$body.find('[data-toggle="qor-action-slideout"]').find("form"),i=t.length-1;i>=0;i--)e.prepend('<input type="hidden" name="primary_values[]" value="'+t[i]+'" />')},filterChanged:function(t,e,i){var n;return n=this.constructloadURL(e,i),n&&this.reload(n),!1},selectorChanged:function(t,e,i){var n;return n=this.constructloadURL(e,i),n&&this.reload(n),!1},keyup:function(t){var e=this.$bottomsheets.find($);13===t.which&&e.length&&e.is(":focus")&&this.search()},search:function(){var e=this.$bottomsheets,i="?keyword=",n=e.data().url,s=t.trim(e.find($).val()),o=n+i+s;this.reload(o)},pagination:function(e){var i=t(e.target),n=i.prop("href");return n&&this.reload(n),!1},reload:function(i){var n=this.$bottomsheets.find(y),s=t(e.TEMPLATE_LOADING).appendTo(n.html(""));window.componentHandler.upgradeElement(s.children()[0]),this.fetchPage(i)},fetchPage:function(e){var i=this.$bottomsheets,n=this;t.get(e,function(s){var o=t(s).find(b),a=o.find(v),r=o.find(y);r.length?(i.find(y).html(r.html()),a.length&&(n.$body.find(v).html(a.html()).trigger("enable"),n.addHeaderClass()),i.trigger(l)):n.reload(e)}).fail(function(){window.alert("server error, please try again later!")})},constructloadURL:function(t,e){var s,o,a=this.filterURL,r=this.$bottomsheets.data().url;if(!a){if(!r)return;a=r}return s=new URL(k+t),o=i(e,s.search),a=this.filterURL=n(a,e,o)},addHeaderClass:function(){this.$body.find(v).hide(),this.$bottomsheets.find(v).children(q).length&&this.$body.addClass("has-header").find(v).show()},submit:function(e){if(!this.resourseData.ingoreSubmit){var i=this.$bottomsheets,n=this.$body,o=e.target,a=t(o),r=this,l=a.find(":submit");s&&(e.preventDefault(),t.ajax(a.prop("action"),{method:a.prop("method"),data:new s(o),dataType:"json",processData:!1,contentType:!1,beforeSend:function(){l.prop("disabled",!0)},success:function(){var t=a.data("returnUrl"),e=a.data("refreshUrl");return e?void(window.location.href=e):"refresh"==t?void r.refresh():void(t&&"refresh"!=t?r.load(t):r.refresh())},error:function(e,s,o){var r;422===e.status?(n.find(".qor-error").remove(),a.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),r=t(e.responseText).find(".qor-error"),a.before(r),r.find("> li > label").each(function(){var e=t(this),i=e.attr("for");i&&a.find("#"+i).closest(".qor-field").addClass("is-error").append(e.clone().addClass("qor-field__error"))}),i.scrollTop(0)):window.alert([s,o].join(": "))},complete:function(){l.prop("disabled",!1)}}))}},load:function(i,n,s){var o,a,r,l=this.options,d=n.actionData,c=this.resourseData.selectModal,f=c&&t(".qor-search-container").length;i&&(this.filterURL=i,this.$body.removeClass("has-header has-hint"),n=t.isPlainObject(n)?n:{},o=n.method?n.method:"GET",a=n.datatype?n.datatype:"html",(r=t.proxy(function(){t.ajax(i,{method:o,dataType:a,success:t.proxy(function(a){var r,p;if("GET"===o){if(r=t(a),p=r.find(b),!p.length)return;if(p.find(".qor-button--cancel").attr("data-dismiss","bottomsheets"),this.$body.html(p.html()),this.$title.html(r.find(l.title).html()),c&&(this.$body.find(".qor-button--new").data("ingoreSubmit",!0).data("selectId",this.resourseData.selectId),"one"!=c&&"1"!=this.resourseData.maxItem&&this.$body.addClass("has-hint")),this.$header.find(".qor-button--new").remove(),this.$title.after(this.$body.find(".qor-button--new")),f&&(this.$header.find(".qor-bottomsheets__search").remove(),this.$header.prepend(e.TEMPLATE_SEARCH)),d&&d.length&&this.bindActionData(d),this.$bottomsheets.one(h,function(){t(this).trigger("enable")}).one(u,function(){t(this).trigger("disable")}),this.show(),this.addHeaderClass(),this.$bottomsheets.data(n),s&&t.isFunction(s)&&s(),l.afterShow){var m=t.fn.qorBottomsheetsAfterShow;for(var g in m)m.hasOwnProperty(g)&&t.isFunction(m[g])&&m[g].call(this,i,a)}}else n.returnUrl?this.load(n.returnUrl):this.refresh()},this),error:t.proxy(function(e){var i;i=t(".qor-error span").size()>0?t(".qor-error span").map(function(){return t(this).text()}).get().join(", "):e.responseText,window.alert(i)},this)})},this))())},open:function(t,e){this.resourseData=t,this.load(t.url,t,e)},show:function(){var e,i=this.$bottomsheets;e=t.Event(d),i.trigger(e),e.isDefaultPrevented()||(i.addClass(m).get(0).offsetWidth,i.trigger(h).addClass(g),t("body").addClass(p))},hide:function(){var e,i=this.$bottomsheets,n=t(".qor-datepicker").not(".hidden");return n.size()&&n.addClass("hidden"),e=t.Event(c),i.trigger(e),e.isDefaultPrevented()?void 0:(this.$body.html(""),i.removeClass(g).removeClass(m).trigger(u),t("body").removeClass(p),this.init(),!1)},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(o)}},e.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},e.TEMPLATE_LOADING='<div><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>',e.TEMPLATE_SEARCH='<div class="qor-bottomsheets__search"><input autocomplete="off" type="text" class="mdl-textfield__input qor-bottomsheets__search-input" placeholder="Search" /><button class="mdl-button mdl-js-button mdl-button--icon qor-bottomsheets__search-button" type="button"><i class="material-icons">search</i></button></div>',e.TEMPLATE='<div class="qor-bottomsheets"><div class="qor-bottomsheets__header"><h3 class="qor-bottomsheets__title"></h3><button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-bottomsheets__close" data-dismiss="bottomsheets"><span class="material-icons">close</span></button></div><div class="qor-bottomsheets__body"></div></div>',e.plugin=function(i){return this.each(function(){var n,s=t(this),a=s.data(o);if(!a){if(/destroy/.test(i))return;s.data(o,a=new e(this,i))}"string"==typeof i&&t.isFunction(n=a[i])&&n.apply(a)})},t.fn.qorBottomSheets=e.plugin,e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.Mustache,n="qor.chooser",s="enable."+n,o="disable."+n;return e.prototype={constructor:e,init:function(){var i=this.$element,n=i.data("remote-data-url"),s={minimumResultsForSearch:20,
dropdownParent:i.parent()};n&&(s.ajax={url:n,dataType:"json",cache:!0,delay:250,data:function(t){return{keyword:t.term,page:t.page,per_page:20}},processResults:function(e,i){i.page=i.page||1;var n=t.map(e,function(t){return t.id=t.Id||t.ID,t});return{results:n,pagination:{more:n.length>=20}}}},s.templateResult=function(t){var n=i.parents(".qor-field").find('[name="select2-result-template"]');return e.formatResult(t,n)},s.templateSelection=function(t){if(t.loading)return t.text;var n=i.parents(".qor-field").find('[name="select2-selection-template"]');return e.formatResult(t,n)},i.on("select2:select",function(e){t(e.target).attr("chooser-selected","true")}).on("select2:unselect",function(e){t(e.target).attr("chooser-selected","")})),i.select2(s)},destroy:function(){this.$element.select2("destroy").removeData(n)}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var s,o=t(this),a=o.data(n);if(!a){if(!t.fn.chosen)return;if(/destroy/.test(i))return;o.data(n,a=new e(this,i))}"string"==typeof i&&t.isFunction(s=a[i])&&s.apply(a)})},e.formatResult=function(e,n){var s="";return s=n.length>0?i.render(n.html().replace(/{{(.*?)}}/g,"[[$1]]"),e):e.text||e.Name||e.Title||e.Code||e[Object.keys(e)[0]],/<(.*)(\/>|<\/.+>)/.test(s)?t(s):s},t(function(){var i='select[data-toggle="qor.chooser"]';t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(s,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(s)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function i(e){var i,n={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(n[String(i).toLowerCase()]=e[i]);return n}function n(i,n){var s=String(n),o=s.toLowerCase(),a=s.toUpperCase(),r=e(s);return t.isPlainObject(i)?i[o]||i[r]||i[a]:void 0}function s(e,i){return"string"==typeof e&&"object"==typeof i&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function o(e,i){this.$element=t(e),this.options=t.extend(!0,{},o.DEFAULTS,t.isPlainObject(i)&&i),this.data=null,this.init()}var a=window.URL||window.webkitURL,r="qor.cropper",l="enable."+r,d="disable."+r,h="change."+r,c="click."+r,u="shown.qor.modal",f="hidden.qor.modal",p=".qor-cropper__toggle",m=".qor-cropper__canvas",g=".qor-cropper__wrapper",b=".qor-cropper__options",y=".qor-cropper__save",v=".qor-cropper__toggle--delete",w=".qor-cropper__toggle--crop",q=".qor-fieldset__undo";return o.prototype={constructor:o,init:function(){var e,i,n,s,o,a=this.options,r=this.$element,l=r.closest(a.parent),d=this;l.length||(l=r.parent()),this.$parent=l,this.$output=l.find(a.output),this.$list=e=l.find(a.list),s=this.$output.data().fetchSizedata,e.find("img").attr("src")||e.find("ul").hide(),s?t.getJSON(s,function(t){o=JSON.parse(t.MediaOption),d.$output.val(JSON.stringify(t)),d.data=o||{},d.build(),d.bind()}):(n=t.trim(this.$output.val()),n&&(i=JSON.parse(n)),this.data=i||{},this.build(),this.bind())},build:function(){var e=this.$output.data(),i={title:e.cropperTitle,ok:e.cropperOk,cancel:e.cropperCancel},n=this.options.text;i.ok&&i.title&&i.cancel&&(n=i),this.wrap(),this.$modal=t(s(o.MODAL,n)).appendTo("body")},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t,e=this.$list;e.find("li").append(o.TOGGLE),t=e.find("img"),t.wrap(o.CANVAS),this.center(t)},unwrap:function(){var e=this.$list;e.find(p).remove(),e.find(m).each(function(){var e=t(this);e.before(e.html()).remove()})},bind:function(){this.$element.on(h,t.proxy(this.read,this)),this.$list.on(c,t.proxy(this.click,this)),this.$modal.on(u,t.proxy(this.start,this)).on(f,t.proxy(this.stop,this))},unbind:function(){this.$element.off(h,this.read),this.$list.off(c,this.click),this.$modal.off(u,this.start).off(f,this.stop)},click:function(e){var i,n,s=e.target,a=this.data;s!==this.$list[0]&&(i=t(s),i.closest(v).size()&&(a.Delete=!0,this.$output.val(JSON.stringify(a)),this.$list.hide(),n=t(o.ALERT),n.find(q).one(c,function(){n.remove(),this.$list.show(),delete a.Delete,this.$output.val(JSON.stringify(a))}.bind(this)),this.$parent.find(".qor-fieldset").append(n)),i.closest(w).size()&&(i=i.closest("li").find("img"),this.$target=i,this.$modal.qorModal("show")))},read:function(t){var e,i=t.target.files;i&&i.length&&(e=i[0],/^image\/\w+$/.test(e.type)&&a?this.load(a.createObjectURL(e)):this.$list.empty().html(o.FILE_LIST.replace("{{filename}}",e.name)))},load:function(e,i){var s,a,r=this.options,l=this,d=this.$list,h=d.find("ul"),c=this.data||{};h.length&&h.find("li").length||(h=t(o.LIST),d.html(h),this.wrap()),h.show(),s=d.find("img"),a=s.size(),s.one("load",function(){var e,s=t(this),o=this.naturalWidth,d=this.naturalHeight,h=s.data(),u=h.sizeResolution,f=h.sizeName,p={},m={},g=h.sizeResolutionWidth,b=h.sizeResolutionHeight;u?(g||b||(g=n(u,"width"),b=n(u,"height")),e=g/b,d*e>o?(g=o,b=g/e):(b=d,g=b*e),p={naturalWidth:o,naturalHeight:d},m={x:Math.round((o-g)/2),y:Math.round((d-b)/2),width:Math.round(g),height:Math.round(b)},l.preview(s,p,m),f&&(c.crop=!0,c[r.key]||(c[r.key]={}),c[r.key][f]=m)):l.center(s),l.$output.val(JSON.stringify(c)),f&&Object.keys(c[r.key]).length>=a&&i&&t.isFunction(i)&&i()}).attr("src",e).data("originalUrl",e),d.show()},start:function(){var e,s=this.options,o=this.$modal,a=this.$target,r=a.data(),l=r.sizeName||"original",d=r.sizeResolution,h=t("<img>").attr("src",r.originalUrl),u=this.data||{},f=this,p=NaN,m=r.sizeResolutionWidth,v=r.sizeResolutionHeight;d&&(m||v||(m=n(d,"width"),v=n(d,"height")),p=m/v),u[s.key]||(u[s.key]={}),o.trigger("enable.qor.material").find(g).html(h),e=this.getList(p),e&&o.find(b).show().append(e),h.cropper({aspectRatio:p,data:i(u[s.key][l]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,autoCropArea:1,built:function(){o.find(y).one(c,function(){var e,i=h.cropper("getData",!0),n=[];u.crop=!0,u[s.key][l]=i,f.imageData=h.cropper("getImageData"),f.cropData=i,e=h.cropper("getCroppedCanvas").toDataURL(),o.find(b+" input").each(function(){var e=t(this);e.prop("checked")&&n.push(e.attr("name"))}),f.output(e,n),o.qorModal("hide")})}})},stop:function(){this.$modal.trigger("disable.qor.material").find(g+" > img").cropper("destroy").remove().end().find(b).hide().find("ul").remove()},getList:function(e){var i=[];return this.$list.find("img").not(this.$target).each(function(){var s=t(this).data(),o=s.sizeResolution,a=s.sizeName,r=s.sizeResolutionWidth,l=s.sizeResolutionHeight;o&&(r||l||(r=n(o,"width"),l=n(o,"height")),r/l===e&&i.push('<label><input type="checkbox" name="'+a+'" checked> <span>'+a+"<small>("+r+"&times;"+l+" px)</small></span></label>"))}),i.length?"<ul><li>"+i.join("</li><li>")+"</li></ul>":""},output:function(e,i){var n=this.$target;e?this.center(n.attr("src",e),!0):this.preview(n),t.isArray(i)&&i.length&&this.autoCrop(e,i),this.$output.val(JSON.stringify(this.data)).trigger(h)},preview:function(e,i,n){var s,o=e.parent(),a=o.parent(),r=a.width(),l=a.height(),d=i||this.imageData,h=t.extend({},n||this.cropData),c=h.width/h.height,u=r;0!=u&&0!=d.naturalWidth&&0!=d.naturalHeight&&(r>=l*c&&(u=l*c),s=h.width/u,e.css({maxWidth:d.naturalWidth/s,maxHeight:d.naturalHeight/s}),this.center(e))},center:function(e,i){e.each(function(){function e(){var t=o.height(),e=s.height(),i="auto";t>e&&(i=(t-e)/2),s.css("margin-top",i)}var n=t(this),s=n.parent(),o=s.parent();i&&s.add(n).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(e,i){var n=this.cropData,s=this.data[this.options.key],o=this;this.$list.find("img").not(this.$target).each(function(){var a=t(this),r=a.data("sizeName");t.inArray(r,i)>-1&&(s[r]=t.extend({},n),e?o.center(a.attr("src",e),!0):o.preview(a))})},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(r)}},o.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},o.TOGGLE='<div class="qor-cropper__toggle"><div class="qor-cropper__toggle--crop"><i class="material-icons">crop</i></div><div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div></div>',o.ALERT='<div class="qor-fieldset__alert"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>',o.CANVAS='<div class="qor-cropper__canvas"></div>',o.LIST="<ul><li><img></li></ul>",o.FILE_LIST='<div class="qor-file__list-item"><span><span>{{filename}}</span></span>',o.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-cropper__wrapper"></div><div class="qor-cropper__options"><p>Sync cropping result to:</p></div></div><div class="mdl-card__actions mdl-card--border"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div><div class="mdl-card__menu"><button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close"><i class="material-icons">close</i></button></div></div></div>',o.plugin=function(e){return this.each(function(){var i,n,s=t(this),a=s.data(r);if(!a){if(!t.fn.cropper)return;if(/destroy/.test(e))return;i=t.extend(!0,{},s.data(),"object"==typeof e&&e),s.data(r,a=new o(this,i))}"string"==typeof e&&t.isFunction(n=a[e])&&n.apply(a)})},t(function(){var e=".qor-file__input",i={parent:".qor-file",output:".qor-file__options",list:".qor-file__list",key:"CropOptions"};t(document).on(l,function(n){o.plugin.call(t(e,n.target),i)}).on(d,function(i){o.plugin.call(t(e,i.target),"destroy")}).triggerHandler(l)}),o}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e,i){return"string"==typeof e&&"object"==typeof i&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function i(e,n){this.$element=t(e),this.options=t.extend(!0,{},i.DEFAULTS,t.isPlainObject(n)&&n),this.date=null,this.formatDate=null,this.built=!1,this.pickerData=this.$element.data(),this.init()}var n="qor.datepicker",s="enable."+n,o="disable."+n,a="pick."+n,r="click."+n,l=".qor-datepicker__embedded",d=".qor-datepicker__save",h=".qor-field__datetimepicker";return i.prototype={init:function(){this.bind()},bind:function(){this.$element.on(r,t.proxy(this.show,this))},unbind:function(){this.$element.off(r,this.show)},build:function(){var n,s=this.$element,o=this.pickerData,c={date:s.val(),inline:!0},u=s.closest(h),f=u.find(o.targetInput);this.built||(this.$modal=n=t(e(i.TEMPLATE,this.options.text)).appendTo("body"),f.size()&&(c.date=f.val()),o.targetInput&&f.data().startDate&&(c.startDate=new Date),n.find(l).on(a,t.proxy(this.change,this)).datepicker(c).triggerHandler(a),n.find(d).on(r,t.proxy(this.pick,this)),this.built=!0)},unbuild:function(){this.built&&this.$modal.find(l).off(a,this.change).datepicker("destroy").end().find(d).off(r,this.pick).end().remove()},change:function(e){var i,n=this.$modal,s=t(e.target);this.date=i=s.datepicker("getDate"),this.formatDate=s.datepicker("getDate",!0),n.find(".qor-datepicker__picked-year").text(i.getFullYear()),n.find(".qor-datepicker__picked-date").text([s.datepicker("getDayName",i.getDay(),!0)+",",String(s.datepicker("getMonthName",i.getMonth(),!0)),i.getDate()].join(" "))},show:function(){this.built||this.build(),this.$modal.qorModal("show")},pick:function(){var t=this.$element,e=this.pickerData.targetInput,i=this.formatDate;if(e){t=t.closest(h).find(e);var n=/^\d{4}-\d{1,2}-\d{1,2}/,s=t.val(),o=n.test(s);o?i=s.replace(n,i):i+=" 00:00"}t.val(i),this.$modal.qorModal("hide")},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(n)}},i.DEFAULTS={text:{title:"Pick a date",ok:"OK",cancel:"Cancel"}},i.TEMPLATE='<div class="qor-modal fade qor-datepicker" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-datepicker__picked"><div class="qor-datepicker__picked-year"></div><div class="qor-datepicker__picked-date"></div></div><div class="qor-datepicker__embedded"></div></div><div class="mdl-card__actions"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-datepicker__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div></div></div>',i.plugin=function(e){return this.each(function(){var s,o,a=t(this),r=a.data(n);if(!r){if(!t.fn.datepicker)return;if(/destroy/.test(e))return;s=t.extend(!0,{},a.data(),"object"==typeof e&&e),a.data(n,r=new i(this,s))}"string"==typeof e&&t.isFunction(o=r[e])&&o.apply(r)})},t(function(){var e='[data-toggle="qor.datepicker"]';t(document).on(o,function(n){i.plugin.call(t(e,n.target),"destroy")}).on(s,function(n){i.plugin.call(t(e,n.target))}).triggerHandler(s)}),i}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e=function(i,n){var s=!1;return this instanceof jQuery?(n=i,i=this):i instanceof jQuery||(i=t(i)),i.each(function(i,o){var a=t(o);if(a.is("form")){if(a.hasClass("ignore-dirtyform"))return!1;if(s=e(a.find('input:not([type="hidden"]):not(".search-field input"):not(".chosen-search input"):not(".ignore-dirtyform"), textarea, select'),n))return!1}else if(a.is(":checkbox")||a.is(":radio")){if(o.checked!=o.defaultChecked)return s=!0,!1}else if(a.is("input")||a.is("textarea")){if(o.value!=o.defaultValue)return s=!0,!1}else if(a.is("select")){for(var r,l=0,d=o.options.length,h=0;d>h;h++)r=o.options[h],s=s||r.selected!=r.defaultSelected,r.defaultSelected&&(l=h);if(s&&!o.multiple&&(s=l!=o.selectedIndex),s)return!1}}),s};t.fn.extend({dirtyForm:e}),t(function(){t(document).on("submit","form",function(){window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null}),t(document).on("change","form",function(){t(this).dirtyForm()?(t.fn.qorSlideoutBeforeHide=!0,window.onbeforeunload=function(){return"You have unsaved changes on this page. If you leave this page, you will lose all unsaved changes."}):(t.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}function i(e,i){var o,a=s.search;return t.isArray(e)&&(o=n(a),t.each(e,function(e,n){e=t.inArray(n,o),-1===e?o.push(n):i&&o.splice(e,1)}),a="?"+o.join("&")),a}function n(e){var i=[];return e&&e.indexOf("?")>-1&&(e=e.split("?")[1],e&&e.indexOf("#")>-1&&(e=e.split("#")[0]),e&&(i=t.map(e.split("&"),function(e){var i,n=[];return e=e.split("="),/page/.test(e[0])?void 0:(i=e[1],n.push(e[0]),i&&(i=t.trim(decodeURIComponent(i)),i&&n.push(i)),n.join("="))}))),i}var s=window.location,o="qor.filter",a="filterChanged."+o,r="enable."+o,l="disable."+o,d="click."+o,h="change."+o,c="is-active",u=".qor-bottomsheets";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){var e=this.options;this.$element.on(d,e.label,t.proxy(this.toggle,this)).on(h,e.group,t.proxy(this.toggle,this))},unbind:function(){this.$element.off(d,this.toggle).off(h,this.toggle)},toggle:function(e){var o,r,l,d,h,f,p,m,g=t(e.currentTarget),b=[];g.is("select")?(o=n(s.search),m=d=g.attr("name"),h=g.val(),r=[d],h&&r.push(h),r=r.join("="),h&&b.push(r),g.children().each(function(){var e=t(this),i=[d],n=t.trim(e.prop("value"));return n&&i.push(n),i=i.join("="),f=t.inArray(i,o),f>-1?(p=i,!1):void 0}),p?(b.push(p),l=i(b,!0)):l=i(b)):g.is("a")&&(e.preventDefault(),m=g.data().paramName,b=n(g.attr("href")),l=g.hasClass(c)?i(b,!0):i(b)),this.$element.closest(u).length?t(u).trigger(a,[l,m]):s.search=l},destroy:function(){this.unbind(),this.$element.removeData(o)}},e.DEFAULTS={label:!1,group:!1},e.plugin=function(i){return this.each(function(){var n,s=t(this),a=s.data(o);if(!a){if(/destroy/.test(i))return;s.data(o,a=new e(this,i))}"string"==typeof i&&t.isFunction(n=a[i])&&n.apply(a)})},t(function(){var i='[data-toggle="qor.filter"]',n={label:"a",group:"select"};t(document).on(l,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(r,function(s){e.plugin.call(t(i,s.target),n)}).triggerHandler(r)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.$clone=null,this.init()}var i=t(window),n=window._,s="qor.fixer",o="enable."+s,a="disable."+s,r="click."+s,l="resize."+s,d="scroll."+s,h="is-hidden",c="is-fixed",u=".qor-page__header";return e.prototype={constructor:e,init:function(){var e=this.options,i=this.$element;t(".qor-page__body .qor-js-table").size()>1||t(".qor-global-search--container").size()>0||i.hasClass("qor-table--medialibrary")||i.is(":hidden")||i.find("tbody > tr:visible").length<=1||(this.$thead=i.find("thead:first"),this.$tbody=i.find("tbody:first"),this.$header=t(e.header),this.$subHeader=t(e.subHeader),this.$content=t(e.content),this.marginBottomPX=parseInt(this.$subHeader.css("marginBottom")),this.paddingHeight=e.paddingHeight,this.fixedHeaderWidth=[],this.isEqualed=!1,this.resize(),this.bind())},bind:function(){this.$element.on(r,t.proxy(this.check,this)),this.$content.on(d,t.proxy(this.toggle,this)),i.on(l,t.proxy(this.resize,this))},unbind:function(){this.$element.off(r,this.check),this.$content.off(d,this.toggle).off(l,this.resize)},build:function(){var e=this.$element,i=this.$thead,n=this.$clone,s=this,o=i.find("> tr").children(),a=this.$content.offset().top+t(u).height();n||(this.$clone=n=i.clone().prependTo(e).css({top:a})),n.addClass([c,h].join(" ")).find("> tr").children().each(function(e){t(this).outerWidth(o.eq(e).outerWidth()),s.fixedHeaderWidth.push(t(this).outerWidth())})},unbuild:function(){this.$clone.remove()},check:function(e){var i,n=t(e.target);n.is(".qor-js-check-all")&&(i=n.prop("checked"),n.closest("thead").siblings("thead").find(".qor-js-check-all").prop("checked",i).closest(".mdl-checkbox").toggleClass("is-checked",i))},toggle:function(){var e=this,i=this.$clone,s=this.$thead,o=this.$content.scrollTop(),a=this.$content.scrollLeft(),r=this.$subHeader.outerHeight()+this.paddingHeight+this.marginBottomPX,l=t(".qor-page__header").outerHeight();if(!this.isEqualed){this.headerWidth=[];var d=s.find("> tr").children();d.each(function(){e.headerWidth.push(t(this).outerWidth())});var c=n.difference(e.fixedHeaderWidth,e.headerWidth);c.length&&(t("thead.is-fixed").find(">tr").children().each(function(i){t(this).outerWidth(e.headerWidth[i])}),this.isEqualed=!0)}o>r-l?i.css({"margin-left":-a}).removeClass(h):i.css({"margin-left":"0"}).addClass(h)},resize:function(){this.build(),this.toggle()},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(s)}},e.DEFAULTS={header:!1,content:!1},e.plugin=function(i){return this.each(function(){var n,o=t(this),a=o.data(s);a||o.data(s,a=new e(this,i)),"string"==typeof i&&t.isFunction(n=a[i])&&n.call(a)})},t(function(){var i=".qor-js-table",n={header:".mdl-layout__header",subHeader:".qor-page__header",content:".mdl-layout__content",paddingHeight:2};t(document).on(a,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(o,function(s){e.plugin.call(t(i,s.target),n)}).triggerHandler(o)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e){n&&(t(e).is(l)?n.upgradeElements(e):n.upgradeElements(t(l,e).toArray()))}function i(e){n&&(t(e).is(l)?n.downgradeElements(e):n.downgradeElements(t(l,e).toArray()))}var n=window.componentHandler,s="qor.material",o="enable."+s,a="disable."+s,r="update."+s,l='[class*="mdl-js"]';t(function(){t(document).on(o,function(t){e(t.target)}).on(a,function(t){i(t.target)}).on(r,function(t){i(t.target),e(t.target)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.transitioning=!1,this.fadable=!1,this.init()}var i=t(document),n="qor.modal",s="enable."+n,o="disable."+n,a="click."+n,r="keyup."+n,l="show."+n,d="shown."+n,h="hide."+n,c="hidden."+n,u="transitionend",f="qor-modal-open",p="shown",m="fade",g="in",b="aria-hidden";return e.prototype={constructor:e,init:function(){this.fadable=this.$element.hasClass(m),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on(a,t.proxy(this.click,this)),this.options.keyboard&&i.on(r,t.proxy(this.keyup,this))},unbind:function(){this.$element.off(a,this.click),this.options.keyboard&&i.off(r,this.keyup)},click:function(e){var i=this.$element[0],n=e.target;if(n===i&&this.options.backdrop)return void this.hide();for(;n!==i;){if("modal"===t(n).data("dismiss")){this.hide();break}n=n.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(e){var n,s=this.$element;if(!this.transitioning&&!s.hasClass(g)&&(n=t.Event(l),s.trigger(n),!n.isDefaultPrevented())){if(i.find("body").addClass(f),s.addClass(p).scrollTop(0).get(0).offsetHeight,this.transitioning=!0,e||!this.fadable)return s.addClass(g),void this.shown();s.one(u,t.proxy(this.shown,this)),s.addClass(g)}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr(b,!1).trigger(d).focus()},hide:function(e){var n,s=this.$element;if(!this.transitioning&&s.hasClass(g)&&(n=t.Event(h),s.trigger(n),!n.isDefaultPrevented())){if(i.find("body").removeClass(f),this.transitioning=!0,e||!this.fadable)return s.removeClass(g),void this.hidden();s.one(u,t.proxy(this.hidden,this)),s.removeClass(g)}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass(p).attr(b,!0).trigger(c)},toggle:function(){this.$element.hasClass(g)?this.hide():this.show()},destroy:function(){this.$element.removeData(n)}},e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.plugin=function(i){return this.each(function(){var s,o=t(this),a=o.data(n);if(!a){if(/destroy/.test(i))return;o.data(n,a=new e(this,i))}"string"==typeof i&&t.isFunction(s=a[i])&&s.apply(a)})},t.fn.qorModal=e.plugin,t(function(){var i=".qor-modal";t(document).on(a,'[data-toggle="qor.modal"]',function(){var i=t(this),s=i.data(),o=t(s.target||i.attr("href"));e.plugin.call(o,o.data(n)?"toggle":s)}).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(s,function(n){e.plugin.call(t(i,n.target))})}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e){var i=[];return t.isPlainObject(e)&&t.each(e,function(){i.push(arguments[1])}),i.join()}function i(t){var e=t&&t.split(",");return t=null,e&&4===e.length&&(t={x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}),t}function n(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function s(e){var i,s={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(s[n(i)]=e[i]);return s}function o(e,i){return"string"==typeof e&&"object"==typeof i&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function a(e,i){this.$element=t(e),this.options=t.extend(!0,{},a.DEFAULTS,t.isPlainObject(i)&&i),this.init()}var r=t(window),l="qor.redactor",d="enable."+l,h="disable."+l,c="click."+l,u="focus."+l,f="blur."+l,p="imageupload."+l,m="imagedelete."+l,g="shown.qor.modal",b="hidden.qor.modal",y=".qor-cropper__wrapper",v=".qor-cropper__save";return a.prototype={constructor:a,init:function(){var e=this.options,i=this.$element,n=i.closest(e.parent);n.length||(n=i.parent()),this.$parent=n,this.$button=t(a.BUTTON),this.$modal=t(o(a.MODAL,e.text)).appendTo("body"),this.bind()},bind:function(){var e=this.$parent,i=t.proxy(this.click,this);this.$element.on(p,function(e,n){t(n).on(c,i)}).on(m,function(e,n){t(n).off(c,i)}).on(u,function(){e.find("img").off(c,i).on(c,i)}).on(f,function(){e.find("img").off(c,i)}),r.on(c,t.proxy(this.removeButton,this))},unbind:function(){this.$element.off(p).off(m).off(u).off(f),r.off(c,this.removeButton)},click:function(e){e.stopPropagation(),setTimeout(t.proxy(this.addButton,this,t(e.target)),1)},addButton:function(e){this.$button.prependTo(e.parent()).off(c).one(c,t.proxy(this.crop,this,e))},removeButton:function(){this.$button.off(c).detach()},crop:function(n){var o=this.options,a=n.attr("src"),r=a,l=t("<img>"),d=this.$modal;t.isFunction(o.replace)&&(r=o.replace(r)),l.attr("src",r),d.one(g,function(){l.cropper({data:i(n.attr("data-crop-options")),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,built:function(){d.find(v).one(c,function(){var i=l.cropper("getData",!0);t.ajax(o.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:a,CropOptions:{original:s(i)},Crop:!0}),dataType:"json",success:function(s){t.isPlainObject(s)&&s.url&&(n.attr("src",s.url).attr("data-crop-options",e(i)).removeAttr("style").removeAttr("rel"),t.isFunction(o.complete)&&o.complete(),d.qorModal("hide"))}})})}})}).one(b,function(){l.cropper("destroy").remove()}).qorModal("show").find(y).append(l)},destroy:function(){this.unbind(),this.$modal.qorModal("hide").remove(),this.$element.removeData(l)}},a.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},a.BUTTON='<span class="qor-cropper__toggle--redactor" contenteditable="false">Crop</span>',a.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-cropper__wrapper"></div></div><div class="mdl-card__actions mdl-card--border"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div><div class="mdl-card__menu"><button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close"><i class="material-icons">close</i></button></div></div></div>',a.plugin=function(e){return this.each(function(){var i,n,s=t(this),o=s.data(l);if(o)/destroy/.test(e)&&s.redactor("core.destroy");else{if(!t.fn.redactor)return;if(/destroy/.test(e))return;s.data(l,o={}),i={imageUpload:s.data("uploadUrl"),fileUpload:s.data("uploadUrl"),initCallback:function(){s.data("cropUrl")&&s.data(l,o=new a(s,{remote:s.data("cropUrl"),text:s.data("text"),parent:".qor-field",toggle:".qor-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:t.proxy(function(){this.code.sync()},this)}))},focusCallback:function(){s.triggerHandler(u)},blurCallback:function(){s.triggerHandler(f)},imageUploadCallback:function(){s.triggerHandler(p,arguments[0])},imageDeleteCallback:function(){s.triggerHandler(m,arguments[1])}},t.extend(i,s.data("redactorSettings")),s.redactor(i)}"string"==typeof e&&t.isFunction(n=o[e])&&n.apply(o)})},t(function(){var e='textarea[data-toggle="qor.redactor"]';t(document).on(h,function(i){a.plugin.call(t(e,i.target),"destroy")}).on(d,function(i){a.plugin.call(t(e,i.target))}).triggerHandler(d)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.index=0,this.init()}var i="qor.replicator",n="enable."+i,s="disable."+i,o="click."+i,a="is-template";return e.prototype={constructor:e,init:function(){var t,e=this.$element,i=this.options,n=e.find(i.itemClass);if(this.isMultipleTemplate=e.data().isMultiple,n.length&&(t=n.filter(i.newClass),t.length)){t.trigger("disable"),this.$template=t,this.multipleTemplates={};var s=t.filter(e.children(i.childrenClass).children(i.newClass));this.isMultipleTemplate?(this.$template=s,e.children(i.childrenClass).children(i.itemClass).size()&&(this.template=s.prop("outerHTML"),this.parse())):(this.template=s.prop("outerHTML"),t.data(a,!0).hide(),this.parse()),s.remove(),this.bind()}},parse:function(t){var e=0;this.template&&(this.template=this.template.replace(/(\w+)\="(\S*\[\d+\]\S*)"/g,function(t,i,n){return n=n.replace(/^(\S*)\[(\d+)\]([^\[\]]*)$/,function(t,s,o,a){return t===n?("name"===i&&(e=o),s+"[{{index}}]"+a):void 0}),i+'="'+n+'"'}),t||(this.index=parseFloat(e)))},bind:function(){var e=this.options;this.$element.on(o,e.addClass,t.proxy(this.add,this)).on(o,e.delClass,t.proxy(this.del,this))},unbind:function(){this.$element.off(o,this.add).off(o,this.del)},add:function(e){var i=this.options,n=this,s=t(e.target).closest(this.options.addClass),o=s.data().template,a=s.closest(this.$element),r=a.children(i.childrenClass),l=this.$template;this.isMultipleTemplate&&this.$template.each(function(){n.multipleTemplates[t(this).data().fieldsetName]=t(this)});var d=this.multipleTemplates[o];if(this.isMultipleTemplate){if(s.length){this.template=d.prop("outerHTML"),this.parse(!0),l=t(this.template.replace(/\{\{index\}\}/g,++this.index));for(var h in s.data())if(h.match(/^sync/)){var c=h.replace(/^sync/,"");l.find("input[name*='."+c+"']").val(s.data(h))}s.closest(i.childrenClass).children("fieldset").size()?s.closest(i.childrenClass).children("fieldset").last().after(l.show()):r.prepend(l.show())}}else s.length&&(l=t(this.template.replace(/\{\{index\}\}/g,++this.index)),s.before(l.show()));l&&l.trigger("enable"),e.stopPropagation()},del:function(e){var i,n=this.options,s=t(e.target).closest(n.itemClass);s.children(":visible").addClass("hidden").hide(),i=t(n.alertTemplate.replace("{{name}}",this.parseName(s))),i.find(n.undoClass).one(o,function(){s.find("> .qor-fieldset__alert").remove(),s.children(".hidden").removeClass("hidden").show()}),s.append(i)},parseName:function(t){var e=t.find("input[name]").attr("name");return e?e.replace(/[^\[\]]+$/,""):void 0},destroy:function(){this.unbind(),this.$element.removeData(i)}},e.DEFAULTS={itemClass:!1,newClass:!1,addClass:!1,delClass:!1,childrenClass:!1,alertTemplate:""},e.plugin=function(n){return this.each(function(){var s,o=t(this),a=o.data(i);a||o.data(i,a=new e(this,n)),"string"==typeof n&&t.isFunction(s=a[n])&&s.call(a)})},t(function(){var i=".qor-fieldset-container",o={itemClass:".qor-fieldset",newClass:".qor-fieldset--new",addClass:".qor-fieldset__add",delClass:".qor-fieldset__delete",childrenClass:".qor-field__block",undoClass:".qor-fieldset__undo",alertTemplate:'<div class="qor-fieldset__alert"><input type="hidden" name="{{name}}._destroy" value="1"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>'};t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target),o)}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location,n=window.componentHandler,s=window.history,o="qor.globalSearch",a="enable."+o,r="disable."+o,l="click."+o,d=".qor-global-search--resource",h=".qor-global-search--results",c=".qor-table",u="is-active";
return e.prototype={constructor:e,init:function(){this.bind(),this.initTab()},bind:function(){this.$element.on(l,t.proxy(this.click,this))},unbind:function(){this.$element.off(l,this.check)},initTab:function(){var e,n=i.search;/resource_name/.test(n)&&(e=n.match(/resource_name=\w+/g).toString().split("=")[1],t(d).removeClass(u),t('[data-resource="'+e+'"]').addClass(u))},click:function(e){var n=t(e.target),o=n.data();if(n.is(d)){var a,r=i.href.replace(/#/g,""),l=o.resource,h=/resource_name/.test(r),c=/keyword/.test(r),u="resource_name="+l,f=c?"&":"?keyword=&";a=l?h?r.replace(/resource_name=\w+/g,u):r+f+u:r.replace(/&resource_name=\w+/g,""),s.pushState?this.fetchSearch(a,n):i.href=a}},fetchSearch:function(e,i){var o=document.title;t.ajax(e,{method:"GET",dataType:"html",beforeSend:function(){t(".mdl-spinner").remove(),t(h).prepend('<div class="mdl-spinner mdl-js-spinner is-active"></div>').find(".qor-section").hide(),n.upgradeElement(document.querySelector(".mdl-spinner"))},success:function(a){var r=t(a).find(h).html();t(d).removeClass(u),i.addClass(u),s.pushState({Page:e,Title:o},o,e),t(".mdl-spinner").remove(),t(h).removeClass("loading").html(r),n.upgradeElements(document.querySelectorAll(c))},error:function(e,i,n){t(h).find(".qor-section").show(),t(".mdl-spinner").remove(),window.alert([i,n].join(": "))}})},destroy:function(){this.unbind(),this.$element.removeData(o)}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var n,s=t(this),a=s.data(o);a||s.data(o,a=new e(this,i)),"string"==typeof i&&t.isFunction(n=a[i])&&n.call(a)})},t(function(){var i='[data-toggle="qor.global.search"]',n={};t(document).on(r,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(a,function(s){e.plugin.call(t(i,s.target),n)}).triggerHandler(a)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.FormData,n="qor.selectcore",s="click."+n,o="submit."+n,a=".qor-table__content",r=".qor-table-container tbody tr";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){this.$element.on(s,r,this.processingData.bind(this)).on(o,"form",this.submit.bind(this))},unbind:function(){this.$element.off(s,".qor-table tbody tr",this.processingData.bind(this)).off(o,"form",this.submit.bind(this))},processingData:function(e){var i,n,s,o,r=t(e.target).closest("tr"),l=r.find("[data-heading]"),d={},h=this.options,c=h.formatOnSelect;return t.extend(d,r.data()),d.$clickElement=r,l.each(function(){i=t(this),n=i.find(a),s=i.data("heading"),o=n.size()?n.html():i.html(),s&&(d[s]=t.trim(o))}),c&&t.isFunction(c)&&c(d),!1},submit:function(e){var n,s=e.target,o=t(s),a=this,r=o.find(":submit"),l=this.options.formatOnSubmit;i&&(e.preventDefault(),t.ajax(o.prop("action"),{method:o.prop("method"),data:new i(s),dataType:"json",processData:!1,contentType:!1,beforeSend:function(){r.prop("disabled",!0)},success:function(e){n=e,n.primaryKey=n.ID,l&&t.isFunction(l)?l(n):a.refresh()},error:function(e,i,n){var s;422===e.status?(o.find(".qor-error").remove(),o.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),s=t(e.responseText).find(".qor-error"),o.before(s),s.find("> li > label").each(function(){var e=t(this),i=e.attr("for");i&&o.find("#"+i).closest(".qor-field").addClass("is-error").append(e.clone().addClass("qor-field__error"))})):window.alert([i,n].join(": "))},complete:function(){r.prop("disabled",!1)}}))},refresh:function(){setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind()}},e.plugin=function(i){return this.each(function(){var s,o=t(this),a=o.data(n);if(!a){if(/destroy/.test(i))return;o.data(n,a=new e(this,i))}"string"==typeof i&&t.isFunction(s=a[i])&&s.apply(a)})},t.fn.qorSelectCore=e.plugin,e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=t("body"),n=t(document),s=window.Mustache,o="qor.selectone",a="qor.bottomsheets",r="click."+o,l="enable."+o,d="disable."+o,h="reload."+a,c=".qor-selected-many__remove",u=".qor-selected-many__undo",f="qor-selected-many__deleted",p=".qor-field__selected-many",m=".qor-field__selectmany-input",g=".qor-select__select-icon",b=".qor-selectmany__hint",y=".qor-field__selectmany",v=".qor-bottomsheets",w="is_selected",q="qor-bottomsheets__select-many";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){n.on(r,"[data-selectmany-url]",this.openBottomSheets.bind(this)).on(h,"."+q,this.reloadData.bind(this)),this.$element.on(r,c,this.clearSelect.bind(this)).on(r,u,this.undoDelete.bind(this))},clearSelect:function(e){var i=t(e.target),n=i.closest(y);return i.closest("[data-primary-key]").addClass(f),this.updateSelectInputData(n),!1},undoDelete:function(e){var i=t(e.target),n=i.closest(y);return i.closest("[data-primary-key]").removeClass(f),this.updateSelectInputData(n),!1},openBottomSheets:function(e){var n=t(e.target).data();this.BottomSheets=i.data("qor.bottomsheets"),this.bottomsheetsData=n,this.$selector=t(n.selectId),this.$selectFeild=this.$selector.closest(y).find(p),this.SELECT_MANY_SELECTED_ICON=t('[name="select-many-selected-icon"]').html(),this.SELECT_MANY_UNSELECTED_ICON=t('[name="select-many-unselected-icon"]').html(),this.SELECT_MANY_HINT=t('[name="select-many-hint"]').html(),this.SELECT_MANY_TEMPLATE=t('[name="select-many-template"]').html(),n.url=n.selectmanyUrl,this.BottomSheets.open(n,this.handleSelectMany.bind(this))},reloadData:function(){this.initItems()},renderSelectMany:function(t){return s.render(this.SELECT_MANY_TEMPLATE,t)},renderHint:function(t){return s.render(this.SELECT_MANY_HINT,t)},initItems:function(){var e,i=t(v).find("tbody tr"),n=this.SELECT_MANY_SELECTED_ICON,s=this.SELECT_MANY_UNSELECTED_ICON,o=[],a=this.$selectFeild.find("[data-primary-key]").not("."+f);a.each(function(){o.push(t(this).data().primaryKey)}),i.each(function(){var i=t(this),a=i.find("td:first");e=i.data().primaryKey,"-1"!=o.indexOf(e)?(i.addClass(w),a.append(n)):a.append(s)}),this.updateHint(this.getSelectedItemData())},getSelectedItemData:function(){var t=this.$selectFeild.find("[data-primary-key]").not("."+f);return{selectedNum:t.length}},updateHint:function(e){var i;t.extend(e,this.bottomsheetsData),i=this.renderHint(e),t(b).remove(),t(v).find(".qor-page__body").before(i)},updateSelectInputData:function(e){var i=e?e:this.$selectFeild,n=i.find("[data-primary-key]").not("."+f),s=e?e.find(m):this.$selector,o=s.find("option");o.prop("selected",!1),n.each(function(){o.filter('[value="'+t(this).data().primaryKey+'"]').prop("selected",!0)})},changeIcon:function(t,e){t.find(g).remove(),t.find("td:first").prepend(e)},removeItem:function(t){var e=t.primaryKey;this.$selectFeild.find('[data-primary-key="'+e+'"]').remove(),this.changeIcon(t.$clickElement,this.SELECT_MANY_UNSELECTED_ICON)},addItem:function(i,n){var o,a=this.renderSelectMany(i),r=this.$selectFeild.find('[data-primary-key="'+i.primaryKey+'"]');return r.size()?r.hasClass(f)?(r.removeClass(f),this.updateSelectInputData(),void this.changeIcon(i.$clickElement,this.SELECT_MANY_SELECTED_ICON)):void 0:(this.$selectFeild.append(a),n?(o=t(s.render(e.SELECT_MANY_OPTION_TEMPLATE,i)),this.$selector.append(o),o.prop("selected",!0),void this.BottomSheets.hide()):void this.changeIcon(i.$clickElement,this.SELECT_MANY_SELECTED_ICON))},handleSelectMany:function(){var e=t(v),i={formatOnSelect:this.formatSelectResults.bind(this),formatOnSubmit:this.formatSubmitResults.bind(this)};e.qorSelectCore(i).addClass(q),this.initItems()},formatSelectResults:function(t){this.formatResults(t)},formatSubmitResults:function(t){this.formatResults(t,!0)},formatResults:function(t,e){if(e)return void this.addItem(t,!0);var i,n=t.$clickElement;n.toggleClass(w),i=n.hasClass(w),i?this.addItem(t):this.removeItem(t),this.updateHint(this.getSelectedItemData()),this.updateSelectInputData()}},e.SELECT_MANY_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ Name ]]</option>',e.plugin=function(i){return this.each(function(){var n,s=t(this),a=s.data(o);if(!a){if(/destroy/.test(i))return;s.data(o,a=new e(this,i))}"string"==typeof i&&t.isFunction(n=a[i])&&n.apply(a)})},t(function(){var i='[data-toggle="qor.selectmany"]';t(document).on(d,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(l,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(l)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=t("body"),n=t(document),s=window.Mustache,o="qor.selectone",a="qor.bottomsheets",r="click."+o,l="enable."+o,d="disable."+o,h="reload."+a,c=".qor-selected__remove",u=".qor-selected__change",f=".qor-field__selected",p=".qor-field__selectone-input",m=".qor-field__selectone-trigger",g=".qor-field__selectone",b=".qor-bottomsheets",y="is_selected",v="qor-bottomsheets__select-one";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){n.on(r,"[data-selectone-url]",this.openBottomSheets.bind(this)).on(h,"."+v,this.reloadData.bind(this)),this.$element.on(r,c,this.clearSelect).on(r,u,this.changeSelect)},clearSelect:function(){var e=t(this),i=e.closest(g);return i.find(f).remove(),i.find(p)[0].value="",i.find(m).show(),!1},changeSelect:function(){var e=t(this),i=e.closest(g);i.find(m).trigger("click")},openBottomSheets:function(e){var n=t(e.target).data();this.BottomSheets=i.data("qor.bottomsheets"),this.bottomsheetsData=n,n.url=n.selectoneUrl,this.SELECT_ONE_SELECTED_ICON=t('[name="select-one-selected-icon"]').html(),this.BottomSheets.open(n,this.handleSelectOne.bind(this))},initItem:function(){var e,i=t(this.bottomsheetsData.selectId).closest(g).find(f);i.length&&(e=i.data().primaryKey,e&&t(b).find('tr[data-primary-key="'+e+'"]').addClass(y).find("td:first").append(this.SELECT_ONE_SELECTED_ICON))},reloadData:function(){this.initItem()},renderSelectOne:function(e){return s.render(t('[name="select-one-selected-template"]').html(),e)},handleSelectOne:function(){var e={formatOnSelect:this.formatSelectResults.bind(this),formatOnSubmit:this.formatSubmitResults.bind(this)};t(b).qorSelectCore(e).addClass(v).data(this.bottomsheetsData),this.initItem()},formatSelectResults:function(t){this.formatResults(t)},formatSubmitResults:function(t){this.formatResults(t,!0)},formatResults:function(i,n){var o,a=this.bottomsheetsData,r=t(a.selectId),l=r.closest(g),d=l.find(f);r[0].value=i.primaryKey,o=this.renderSelectOne(i),d.size()&&d.remove(),l.prepend(o),l.find(m).hide(),n&&(r.append(s.render(e.SELECT_ONE_OPTION_TEMPLATE,i)),r[0].value=i.primaryKey),this.BottomSheets.hide()}},e.SELECT_ONE_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ Name ]]</option>',e.plugin=function(i){return this.each(function(){var n,s=t(this),a=s.data(o);if(!a){if(/destroy/.test(i))return;s.data(o,a=new e(this,i))}"string"==typeof i&&t.isFunction(n=a[i])&&n.apply(a)})},t(function(){var i='[data-toggle="qor.selectone"]';t(document).on(d,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(l,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(l)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e,i){this.options=i,this.$element=t(e),this.init()}var i=t(document),n="qor.selector",s="enable."+n,o="disable."+n,a="click."+n,r="selectorChanged."+n,l="open",d="active",h="hover",c="selected",u="disabled",f="clearable",p="."+c,m=".qor-selector-toggle",g=".qor-selector-label",b=".qor-selector-clear",y=".qor-selector-menu",v=".qor-bottomsheets";return e.prototype={constructor:e,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var i=this.$element,n=t(e.TEMPLATE),s=this.options.aligned+"-aligned",o={},a=i.data(),r=a.hover,l=i.attr("name");this.isBottom="bottom"==a.position,r&&n.addClass(h),n.addClass(s).find(y).html(function(){var e=[];return i.children().each(function(){var i=t(this),n=i.attr("selected"),s=i.attr("disabled"),a=i.attr("value"),r=i.text(),d=[];n&&(d.push(c),o.value=a,o.label=r,o.paramName=l),s&&d.push(u),e.push("<li"+(d.length?' class="'+d.join(" ")+'"':"")+' data-value="'+a+'" data-label="'+r+'" data-param-name="'+l+'">'+r+"</li>")}),e.join("")}),this.$selector=n,i.hide().after(n),n.find(m).data("paramName",l),this.pick(o,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(a,t.proxy(this.click,this)),i.on(a,t.proxy(this.close,this))},unbind:function(){this.$selector.off(a,this.click),i.off(a,this.close)},click:function(e){var i=t(e.target);e.stopPropagation(),i.is(b)?this.clear():i.is("li")?(i.hasClass(c)||i.hasClass(u)||this.pick(i.data()),this.close()):i.closest(m).length&&this.open()},pick:function(e,i){var n=this.$selector,s=!!e.value,o=this.$element;n.find(m).toggleClass(d,s).toggleClass(f,s&&this.options.clearable).find(g).text(e.label||this.placeholder),i||(n.find(y).children('[data-value="'+e.value+'"]').addClass(c).siblings(p).removeClass(c),o.val(e.value),o.closest(v).length&&!o.closest('[data-toggle="qor.filter"]').length?t(v).trigger(r,[e.value,e.paramName]):o.trigger("change"))},clear:function(){var t=this.$element;this.$selector.find(m).removeClass(d).removeClass(f).find(g).text(this.placeholder).end().end().find(y).children(p).removeClass(c),t.val("").trigger("change")},open:function(){i.triggerHandler(a),this.$selector.addClass(l),this.isBottom&&this.$selector.addClass("bottom")},close:function(){this.$selector.removeClass(l),this.isBottom&&this.$selector.removeClass("bottom")},destroy:function(){this.unbuild(),this.$element.removeData(n)}},e.DEFAULTS={aligned:"left",clearable:!1},e.TEMPLATE='<div class="qor-selector"><a class="qor-selector-toggle"><span class="qor-selector-label"></span><i class="material-icons qor-selector-arrow">arrow_drop_down</i><i class="material-icons qor-selector-clear">clear</i></a><ul class="qor-selector-menu"></ul></div>',e.plugin=function(i){return this.each(function(){var s,o,a=t(this),r=a.data(n);if(!r){if(/destroy/.test(i))return;s=t.extend({},e.DEFAULTS,a.data(),"object"==typeof i&&i),a.data(n,r=new e(this,s))}"string"==typeof i&&t.isFunction(o=r[i])&&o.apply(r)})},t(function(){var i='[data-toggle="qor.selector"]';t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(s,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(s)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.slided=!1,this.disabled=!1,this.slideoutType=!1,this.init()}var i=t(document),n=window.FormData,s=window._,o="qor.slideout",a="keyup."+o,r="click."+o,l="submit."+o,d="show."+o,h="slideoutSubmitComplete."+o,c="slideoutClosed."+o,u="shown."+o,f="hide."+o,p="hidden."+o,m="transitionend",g="qor-slideout-open",b="qor-slideout-mini",y="is-shown",v="is-slided",w="is-selected",q=".mdl-layout__content.qor-page",_=".qor-actions__locale";return e.prototype={constructor:e,init:function(){this.build(),this.bind()},build:function(){var i;this.$slideout=i=t(e.TEMPLATE).appendTo("body"),this.$title=i.find(".qor-slideout__title"),this.$body=i.find(".qor-slideout__body"),this.$bodyClass=t("body").prop("class")},unbuild:function(){this.$title=null,this.$body=null,this.$slideout.remove()},bind:function(){this.$slideout.on(l,"form",t.proxy(this.submit,this)).on(r,'[data-dismiss="slideout"]',t.proxy(this.hide,this)),i.on(a,t.proxy(this.keyup,this))},unbind:function(){this.$slideout.off(l,this.submit),i.off(a,this.keyup).off(r,this.hide)},keyup:function(e){if(27===e.which){if(t(".qor-bottomsheets").is(":visible")||t(".qor-modal").is(":visible"))return;this.hide(),this.removeSelectedClass()}},loadScript:function(e,i,n){var s=document.createElement("script");s.src=e,s.onload=function(){var e=t.fn.qorSliderAfterShow;for(var s in e)e.hasOwnProperty(s)&&e[s].call(this,i,n)},document.body.appendChild(s)},loadStyle:function(t){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)},pushArrary:function(e,i){var n=[];return e.each(function(){n.push(t(this).prop(i))}),n},loadExtraResource:function(e,i,n,o){var a=e;a=a.join(""),a=a.replace(/<\s*body/gi,"<div"),a=a.replace(/<\s*\/body/gi,"</div");var r=t(a).prop("class");t("body").addClass(r);var l=i.filter("link"),d=t("link"),h=i.filter("script"),c=t("script"),u=this.pushArrary(l,"href"),f=this.pushArrary(d,"href"),p=this.pushArrary(h,"src"),m=this.pushArrary(c,"src"),g=s.difference(u,f),b=s.difference(p,m),y=g.length,v=b.length;if(1===y)this.loadStyle(g);else if(y>1)for(var w=y-1;w>=0;w--)this.loadStyle(g[w]);if(1===v)this.loadScript(b,n,o);else if(v>1)for(var q=v-1;q>=0;q--)this.loadScript(b[q],n,o)},removeSelectedClass:function(){this.$element.find("[data-url]").removeClass(w)},submit:function(e){var i=this.$slideout,s=this.$body,o=e.target,a=t(o),r=this,l=a.find(":submit");n&&(e.preventDefault(),t.ajax(a.prop("action"),{method:a.prop("method"),data:new n(o),dataType:"html",processData:!1,contentType:!1,beforeSend:function(){l.prop("disabled",!0),t.fn.qorSlideoutBeforeHide=null},success:function(e){var n=a.data("returnUrl"),s=a.data("refreshUrl");if(i.trigger(h),s)return void(window.location.href=s);if("refresh"==n)return void r.refresh();if(n&&"refresh"!=n)r.load(n);else{var o="/"+location.pathname.split("/")[1],l=[];t(e).find(".qor-alert").each(function(e,i){var n=t(i).find(".qor-alert-message").text().trim(),s=t(i).data("type");""!==n&&l.push({Type:s,Message:n,Keep:!0})}),l.length>0&&(document.cookie="qor-flashes="+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+"; path="+o),r.refresh()}},error:function(e,n,o){var r;422===e.status?(s.find(".qor-error").remove(),a.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),r=t(e.responseText).find(".qor-error"),a.before(r),r.find("> li > label").each(function(){var e=t(this),i=e.attr("for");i&&a.find("#"+i).closest(".qor-field").addClass("is-error").append(e.clone().addClass("qor-field__error"))}),i.scrollTop(0)):window.alert([n,o].join(": "))},complete:function(){l.prop("disabled",!1)}}))},load:function(e,i){var n,s,o,a=this.options;e&&(i=t.isPlainObject(i)?i:{},n=i.method?i.method:"GET",s=i.datatype?i.datatype:"html",o=t.proxy(function(){t.ajax(e,{method:n,dataType:s,success:t.proxy(function(s){var o,r;if("GET"===n){if(o=t(s),r=o.find(q),this.slideoutType=r.find(".qor-form-container").data().slideoutType,!r.length)return;var l=s.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);l&&this.loadExtraResource(l,o,e,s),r.find(".qor-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),this.$title.html(o.find(a.title).html()),this.$body.html(r.html()),this.$body.find(_).remove(),this.$slideout.one(u,function(){t(this).trigger("enable")}).one(p,function(){t(this).trigger("disable")}),this.show();var d=t.fn.qorSliderAfterShow;if(d)for(var h in d)d.hasOwnProperty(h)&&t.isFunction(d[h])&&d[h].call(this,e,s)}else i.returnUrl?this.load(i.returnUrl):this.refresh()},this),error:t.proxy(function(e){var i;i=t(".qor-error span").size()>0?t(".qor-error span").map(function(){return t(this).text()}).get().join(", "):e.responseText,window.alert(i)},this)})},this),this.slided?(this.hide(),this.$slideout.one(p,o)):o())},open:function(t){this.load(t.url,t.data)},show:function(){var e,i=this.$slideout;this.slided||(e=t.Event(d),i.trigger(e),e.isDefaultPrevented()||("mini"==this.slideoutType?i.addClass(b):i.removeClass(b),i.addClass(y).get(0).offsetWidth,i.one(m,t.proxy(this.shown,this)).addClass(v).scrollTop(0)))},shown:function(){this.slided=!0,t("body").addClass(g),this.$slideout.trigger(u)},hide:function(){t.fn.qorSlideoutBeforeHide?window.confirm("You have unsaved changes on this slideout. If you close this slideout, you will lose all unsaved changes!")&&this.hideSlideout():this.hideSlideout(),this.removeSelectedClass()},hideSlideout:function(){var e,i=this.$slideout,n=t(".qor-datepicker").not(".hidden");window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null,n.size()&&n.addClass("hidden"),this.slided&&(e=t.Event(f),i.trigger(e),e.isDefaultPrevented()||(this.$body.html(""),i.one(m,t.proxy(this.hidden,this)).removeClass(v),i.trigger(c)))},hidden:function(){this.slided=!1,t("body").removeClass(g),this.$slideout.removeClass(y).trigger(p)},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(o)}},e.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},e.TEMPLATE='<div class="qor-slideout"><div class="qor-slideout__header"><button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__close" data-dismiss="slideout"><span class="material-icons">close</span></button><h3 class="qor-slideout__title"></h3></div><div class="qor-slideout__body"></div></div>',e.plugin=function(i){return this.each(function(){var n,s=t(this),a=s.data(o);if(!a){if(/destroy/.test(i))return;s.data(o,a=new e(this,i))}"string"==typeof i&&t.isFunction(n=a[i])&&n.apply(a)})},t.fn.qorSlideout=e.plugin,e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location,n="qor.sorter",s="enable."+n,o="disable."+n,a="click."+n,r="is-sortable";return e.prototype={constructor:e,init:function(){this.$element.addClass(r),this.bind()},bind:function(){this.$element.on(a,"> thead > tr > th",t.proxy(this.sort,this))},unbind:function(){this.$element.off(a,this.sort)},sort:function(e){var n=t(e.currentTarget),s=n.data("orderBy"),o=i.search,a="order_by="+s;s&&(/order_by/.test(o)?o=o.replace(/order_by(=\w+)?/,function(){return a}):o+=o.indexOf("?")>-1?"&"+a:a,i.search=o)},destroy:function(){this.unbind(),this.$element.removeClass(r).removeData(n)}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var s,o=t(this),a=o.data(n);if(!a){if(/destroy/.test(i))return;o.data(n,a=new e(this,i))}"string"==typeof i&&t.isFunction(s=a[i])&&s.apply(a)})},t(function(){var i=".qor-js-table";t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(s,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(s)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window._,n=t("body"),s="qor.tabbar",o="enable."+s,a="disable."+s,r="click."+s,l=".qor-layout__tab-button",d=".qor-layout__tab-content",h=".mdl-layout__tab-bar-container",c=".qor-layout__tab-right",u=".qor-layout__tab-left",f="is-active";return e.prototype={constructor:e,init:function(){this.initTab(),this.bind()},bind:function(){this.$element.on(r,l,this.switchTab.bind(this)),this.$element.on(r,c,this.scrollTabRight.bind(this)),this.$element.on(r,u,this.scrollTabLeft.bind(this))},unbind:function(){this.$element.off(r,l,this.switchTab),this.$element.off(r,c,this.scrollTabRight),this.$element.off(r,u,this.scrollTabLeft)},initTab:function(){var s=this.$element.data();s.scopeActive?n.data("tabScopeActive",s.scopeActive):(t(l).first().addClass(f),n.data("tabScopeActive",t(l).first().data("name"))),this.tabWidth=0,this.slideoutWidth=t(d).outerWidth(),i.each(t(l),function(e){this.tabWidth=this.tabWidth+t(e).outerWidth()}.bind(this)),this.tabWidth>this.slideoutWidth&&this.$element.find(h).append(e.ARROW_RIGHT)},scrollTabLeft:function(e){e.stopPropagation();var i=t(h),n=i.scrollLeft(),s=n-this.slideoutWidth;n>0&&i.animate({scrollLeft:s},400,function(){t(c).show(),0==i.scrollLeft()&&t(u).hide()})},scrollTabRight:function(i){i.stopPropagation();var n=t(h),s=n.scrollLeft(),o=this.tabWidth,a=this.slideoutWidth,r=s+a;o>r&&(n.animate({scrollLeft:r},400,function(){t(u).show(),n.scrollLeft()+a>=o&&t(c).hide()}),!t(u).size()&&this.$element.find(h).prepend(e.ARROW_LEFT))},switchTab:function(e){var i=t(e.target),s=this.$element,o=i.data(),a=n.data().tabScopeActive,r=t(".qor-slideout").is(":visible");if(r)return i.hasClass(f)?!1:(s.find(l).removeClass(f),i.addClass(f),t.ajax(o.tabUrl,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){t(".qor-layout__tab-spinner").remove();var e='<div class="mdl-spinner mdl-js-spinner is-active qor-layout__tab-spinner"></div>';t(d).hide().before(e),window.componentHandler.upgradeElement(t(".qor-layout__tab-spinner")[0])},success:function(e){t(".qor-layout__tab-spinner").remove(),n.data("tabScopeActive",i.data("name"));var s=t(e).find(d).html();t(d).show().html(s).trigger("enable")},error:function(){t(".qor-layout__tab-spinner").remove(),n.data("tabScopeActive",a)}}),!1)},destroy:function(){this.unbind(),n.removeData("tabScopeActive")}},e.ARROW_RIGHT='<a href="javascript://" class="qor-layout__tab-right"></a>',e.ARROW_LEFT='<a href="javascript://" class="qor-layout__tab-left"></a>',e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var n,o=t(this),a=o.data(s);if(!a){if(/destroy/.test(i))return;o.data(s,a=new e(this,i))}"string"==typeof i&&t.isFunction(n=a[i])&&n.apply(a)})},t(function(){var i='[data-toggle="qor.tab"]';t(document).on(a,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(o,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(o)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend(!0,{},e.DEFAULTS,t.isPlainObject(n)&&n),this.formatDate=null,this.pickerData=this.$element.data(),this.targetInputClass=this.pickerData.targetInput,this.parent=this.$element.closest(h),this.isDateTimePicker=this.targetInputClass&&this.parent.size(),this.$targetInput=this.parent.find(this.targetInputClass),this.init()}var i="qor.timepicker",n="enable."+i,s="disable."+i,o="click."+i,a="focus."+i,r="keydown."+i,l="blur."+i,d="selectTime."+i,h=".qor-field__datetimepicker",c=".ui-timepicker-selected";return e.prototype={init:function(){this.bind(),this.oldValue=this.$targetInput.val();var t=new Date,e=t.getMonth();e=8>e?"0"+(e+1):e,this.dateValueNow=t.getFullYear()+"-"+e+"-"+t.getDate()},bind:function(){var e={timeFormat:"H:i",showOn:null,wrapHours:!1,scrollDefault:"now"};this.isDateTimePicker&&this.$targetInput.timepicker(e).on(d,t.proxy(this.changeTime,this)).on(l,t.proxy(this.blur,this)).on(a,t.proxy(this.focus,this)).on(r,t.proxy(this.keydown,this)),this.$element.on(o,t.proxy(this.show,this))},unbind:function(){this.$element.off(o,this.show),this.isDateTimePicker&&this.$targetInput.off(d,this.changeTime).off(l,this.blur).off(a,this.focus).off(r,this.keydown)},focus:function(){},blur:function(){var t,e,i,n,s,o,a=this.$targetInput.val(),r=a.split(" "),l=r.length,d=/\d{1,2}:\d{1,2}/,h=/^\d{4}-\d{1,2}-\d{1,2}/;if(1==l)h.test(r[0])&&(e=r[0],i="00:00"),d.test(r[0])&&(e=this.dateValueNow,i=r[0]);else for(var c=0;l>c;c++){n=h.test(r[c]),s=d.test(r[c]),n&&(e=r[c],o="-"),s&&(i=r[c],o=":"),t=r[c].split(o);for(var u=0;u<t.length;u++)t[u].length<2&&(t[u]="0"+t[u]);n&&(e=t.join(o)),s&&(i=t.join(o))}this.checkDate(e)&&this.checkTime(i)?(this.$targetInput.val(e+" "+i),this.oldValue=this.$targetInput.val()):this.$targetInput.val(this.oldValue)},keydown:function(t){var e=t.keyCode,i=[48,49,50,51,52,53,54,55,56,57,8,37,38,39,40,27,32,20,189,16,186,96,97,98,99,100,101,102,103,104,105];-1==i.indexOf(e)&&t.preventDefault()},checkDate:function(t){var e=/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{1,2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/;return e.test(t)},checkTime:function(t){var e=/^([01]\d|2[0-3]):?([0-5]\d)$/;return e.test(t)},changeTime:function(){var t,e=this.$targetInput,i=this.oldValue,n=/\d{1,2}:\d{1,2}/,s=n.test(i),o=e.data().timepickerList.find(c).html();t=i?s?i.replace(n,o):i+" "+o:this.dateValueNow+" "+o,e.val(t)},show:function(){this.isDateTimePicker&&(this.$targetInput.timepicker("show"),this.oldValue=this.$targetInput.val())},destroy:function(){this.unbind(),this.$targetInput.timepicker("remove"),this.$element.removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var s,o,a=t(this),r=a.data(i);if(!r){if(!t.fn.datepicker)return;if(/destroy/.test(n))return;s=t.extend(!0,{},a.data(),"object"==typeof n&&n),a.data(i,r=new e(this,s))}"string"==typeof n&&t.isFunction(o=r[n])&&o.apply(r)})},t(function(){var i='[data-toggle="qor.timepicker"]';t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(n)}),e});